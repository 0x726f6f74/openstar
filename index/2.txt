<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>欢迎登录联众新世界</title>
<link rel="stylesheet" type="text/css"
	href="/css/ddz/webhallb.css" />
<link rel="stylesheet" type="text/css" href="/css/ddz/layout.css" />
<link rel="stylesheet" type="text/css" href="/style/alert.css" />
<script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="/js/jquery.alerts.js"></script>
<script type="text/javascript" src="/js/dzz/select.js"></script>
<script type="text/javascript" src="/js/alert.js"></script>
<script type="text/javascript" src="/js/login_protect.js"></script>
<script type="text/javascript" src="/js/localStorage.js"></script>
<link rel="stylesheet" type="text/css" href="/css/ddz/login.css" />
<script type="text/javascript">
var vflag = 'on';
	function auth() {
		var userName = document.webhallbForm.loginUserName.value;
		if (userName != null){
			userName = userName.replace(/(^\s*)|(\s*$)/g, "");
      if($("#logintype").val() == "EMAIL" || $("#logintype").val() == "MOBILE"){
        if(userName.indexOf('@') > -1){
          $("#logintype").val("EMAIL");
          window.localStorage.setItem( "login_type", "EMAIL");
        }
        else{
          $("#logintype").val("MOBILE")
          window.localStorage.setItem( "login_type", "MOBILE");
        }
      }
      else{window.localStorage.setItem( "login_type", "ACCOUNT");}
    }
    else{}
    
		var password = document.webhallbForm.loginPassword.value;
		//var vflag = 'on';
		if (userName == "") {
			prompt();
			document.webhallbForm.loginUserName.focus();
			return false;
		} else if (password == "") {
			prompt();
			document.webhallbForm.loginPassword.focus();
			return false;
		} else if (vflag=="on" && rndnumber == "") {
			var rndnumber = document.webhallbForm.rndnumber.value;
			if (rndnumber == "") {
				prompt();
				document.webhallbForm.rndnumber.focus();
			}
			return false;
		} else {
			submit();
		}
	}
	//检查用户名
	function checkUsername(username, minLen, maxLen) {
		var str = "abcdefghijklmnopqrstuvwxyz1234567890_ABCDEFGHIJKLMNOPQRSTUVWXYZ";
		if (ByteWordCount(username) < minLen) {
			return false;
		}
		if (ByteWordCount(username) > maxLen) {
			return false;
		}
		for (i = 0; i < username.length; i++) {
			if (str.indexOf(username.charAt(i)) == -1) {
				return false;
			}
		}
		return true;
	}
	function ByteWordCount(value) {
		var txt = value;
		txt = txt.replace(/([\u0391-\uFFE5])/ig, '11');
		return txt.length;
	}
	document.onkeypress = function whenKeyDown(ev) {
		var e = ev || event;
		var currKey = e.keyCode || e.which || e.charCode;
		if (currKey == 13) {
			$('#submit').click();
			return false;
		}
	}
</script>
</head>

<body>

<script type="text/javascript" src="/scripts/en.js?v=97406"></script>



	<div class="header">
		<h1>
			<img src="images/img_logo.jpg" width="279" height="61" alt="联众游戏登录中心" />
		</h1>
	</div>
	<div class="main">
		<!--表单和按钮-->
		<div class="viewport">
			<div class="overview">
				<div id="navi_handle" class="hd">
					<p>
						<span class="clearfix"><a  href="#">联众帐号</a><a class="curr" href="#">手机/邮箱</a></span>
					</p>
				</div>
				<div class="bd">
					<form name="webhallbForm" action="lzgamelogin!authWebhallb.do"
						method="post" onsubmit="return false;">
						<table>
							<tr>
								<th><span>联众帐号</span>:</th>
								<td><span class="border"><input type="text" value=""
										id="loginUserName" name="account" style="width: 261px" tabindex="1" /></span></td>
								<td>
										<a
											href="http://id.ourgame.com"
											target="_blank">注册新用户</a>
									 </td>
							</tr>
							<tr>
								<th><span>密码:</span></th>
								<td><span class="border"><input type="password"
										value="" id="loginPassword" name="password"
										style="width: 261px" tabindex="2"/></span></td>
								<td><a
									href="http://id.ourgame.com/scenter/nasPwd!forgetPwd1.do"
									target="_blank">忘记密码</a></td>
							</tr>
							
							
							<tr>
								<th><span>验证码:</span></th>
								<td style="padding-top: 3px;">
									<div>
										<span class="border"><input type="text" id="rndnumber"
											name="vcode" style="width: 154px" tabindex="3"/></span><span
											class="vcode"><img id="imgcode" src=""
											width="100" height="40" /></span>
									</div>
								</td>
								<td><a href="javascript:freshcode();">换一张</a></td>
							</tr>
							
							
							
							<tr>
								<th>&nbsp;</th>
								<td><input style="float: left;" type="image"
									src="images/btn_login.gif" width="119" height="38" tabindex="4"
									onclick="return auth();" id="submit"/><span href="#" class="back" onclick="go('-1')">返回</span></td>
								<td>&nbsp;</td>
							</tr>
						</table>
						<input type="hidden" id="userType" name="userType" value="" /> <input
							type="hidden" id="captchaKey" name="verifyKey" /> <input
							type="hidden" id="from" name="from" value="" /> <input
							type="hidden" id="nextUrl" name="nexturl" value="http://www.lianzhong.com" />
						<input type="hidden" id="regurl" name="regurl" value="" />
						<input type="hidden" name="logintype" id="logintype" value=""/>
						<input type="hidden" name="guid" id="guid" value=""/>
						<input type="hidden" name="dynamicPwd" id="dynamicPwd" value=""/>
					</form>
				</div>
				<div class="ft">
					<table>
						<tr>
							<th><span>使用合作方帐号登录:</span></th>
							<td><a
								href="sinalogin.do?type=sina&from=lianzhong&nexturl=http://www.lianzhong.com"><span
									style="padding-left: 40px; background-image: url(images/ico_weibo.gif);">新浪微博</span></a>
							</td>
							<td style="color: #b5b5b5;">|</td>
							<td><a
								href="renrenlogin.do?type=renren&from=lianzhong&nexturl=http://www.lianzhong.com"><span
									style="padding-left: 55px; background-image: url(images/ico_renren.gif)">人人网</span></a>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
		<div class="footer">
			<p>北京联众互动网络股份有限公司版权所有</p>
		</div>
		<!--formend-->

		<div class="prompt" id="prompt" onclick="$(this).hide()">
			<!--验证弹出层-->
			<dl>
			
				
				
				
				
				<dt id="return_error"></dt>
					<script>
					var userName = document.webhallbForm.loginUserName.value;
				      if (userName != null &&userName!=""){
				        userName = userName.replace(/(^\s*)|(\s*$)/g, "");
				        if($("#logintype").val() == "ACCOUNT"){
				          if(userName.indexOf('@') > -1){
				            $("#return_error").text("您输入的是邮箱账号，请切换至手机/邮箱登录。")
				          }
				          else if(userName.match(/^1\d{10}$/) != null){
				            $("#logintype").val() == "EMAIL";
				            $("#return_error").html("账号或密码不正确，请查证！<br>如果您使用的是手机账号请切换至手机/邮箱登录。")
				          }
				          else{
				            $("#return_error").text("账号或密码不正确，请查证。")
				          }
				        }
				        else if($("#logintype").val() == "EMAIL" || $("#logintype").val() == "MOBILE"){
				          if(userName.indexOf('@') == -1){
				            $("#return_error").html("账号或密码不正确，请查证！<br>请确认是否使用的是手机/邮箱账号登录，否则请切换至联众账号登录。")
				          }

				          else if(userName.match(/^[^1]\d{10}$/) != null){
				            $("#logintype").val() == "EMAIL";
				            $("#return_error").html("账号或密码不正确，请查证！<br>请确认是否使用的是手机/邮箱账号登录，否则请切换至联众账号登录。")
				          }
				          else{
				            $("#return_error").text("账号、密码不正确或通行证未激活，请查证。")
				          }
				        } else {
				        	$("#return_error").text("账号或密码不正确，请查证。")
				        }
				      } else {
				    	  $("#return_error").text("账号或密码不正确，请查证。")
				      }
					</script>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
					
				
				
			</dl>
		</div>
		<!--验证弹出层end-->
		<!--buttonend-->

	</div>
	<!--表单和按钮end-->
  <div class="trans_layout" id="trans_layout"></div>
	<script language="javascript" type="text/javascript">
	setTimeout(function(){
		try{
			var t = document.getElementById("loginUserName");
			t.focus();
			t.select();
		}catch(e){}
	},200);
	function go(index){
		window.history.go(index);
		return false;
	}
		function prompt() {
			document.getElementById("prompt").style.display = "block"
		}
		function hidden() {
			document.getElementById("prompt").style.display = "none"
		}
	</script>

	

  
  
  
  
  

	<script type="text/javascript">
		var $tabHandle = $('#navi_handle');
		var $formLayout = $('.bd>form>table');
		var $label = $('th>span:eq(0)', $formLayout);
		$tabHandle.live('click', function(e) {
			var $target = e.target;
			if (e.target.nodeName != 'A') {
				return false
			}
			$('a.curr', $tabHandle).removeClass('curr');
			$($target).addClass('curr');
			$label.html($($target).text());
      if($($target).text() == "手机/邮箱"){
        $("#logintype").val("EMAIL");
        window.localStorage.setItem( "login_type", "EMAIL");
      }
      else if($($target).text() == "联众帐号"){
        $("#logintype").val("ACCOUNT");
        window.localStorage.setItem( "login_type", "ACCOUNT");
      }
			return false;
		});
	</script>
	<script language="javascript" type="text/javascript">
		function freshcode() {
			if (vflag=="on") {
				var myDate = new Date();
				var key = "auth.webhallb.login." + myDate.getTime() + Math.random();
				document.getElementById('captchaKey').value = key;
				document.getElementById("imgcode").src = 'http://captcha.ourgame.com/lzcaptcha?key='
					+ key;
			}
		}

		freshcode();
	</script>
	<script language="javascript" type="text/javascript">
  $(function(){
    if($("#logintype").val() == "" ){
      $("#logintype").val(window.localStorage.getItem("login_type"));
      if(window.localStorage.getItem("login_type") == "EMAIL" || window.localStorage.getItem("login_type") == "MOBILE"){
        $('a:last-child', $tabHandle).trigger('click');
      }
      else{
        $('a:first-child', $tabHandle).trigger('click');
      }
    }
    else{
      if($("#logintype").val() == "EMAIL"){
        $('a:last-child', $tabHandle).trigger('click');
      }
      else if($("#logintype").val() == "MOBILE"){
        $('a:last-child', $tabHandle).trigger('click');
      }
      else if($("#logintype").val() == "ACCOUNT"){
        $('a:first-child', $tabHandle).trigger('click');
      }
    }

  })
  function submitDynamicPwd() {
	var dp = document.getElementById("dynamicPwdTemp").value;
	document.getElementById("dynamicPwd").value = dp;
	//var ac = document.getElementById("accountTemp").value;
	//document.getElementById("account").value = ac;
	document.webhallbForm.action = "dynamicpwdlogin.do";
	document.webhallbForm.submit();
}
	</script>
	
</body>
</html>
